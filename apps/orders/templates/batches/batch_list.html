{% extends 'base.html' %}
{% load static %}
{% block title %}Todos os Lotes{% endblock %}

{% block content %}

  <div class="row mb-3">
    <div class="col-12 d-flex align-items-center justify-content-between">
      <h5 class="display-6 mb-0">Batches</h5>
    </div>
  </div>
  <!-- Filtro avançado componentizado -->
  {% include 'batches/components/_filter.html' %}


  <div class="table-responsive mt-3">
    <table class="table table-hover table-bordered">
      <thead class="table-light">
        <tr>
          <th>Código do Lote</th>
          <th>Cliente</th>
          <th>Exportador</th>
          <th>Valor Total</th>
          <th class="text-end">Criado em</th>
        </tr>
      </thead>
      <tbody>
        {% for batch in batches %}
        <tr>
          <td>{{ batch.batch_code }}</td>
          <td>{{ batch.order.customer.name }}</td>
          <td>{{ batch.order.exporter.name }}</td>
          <td>
            {{ batch.total_value|floatformat:2 }}
          </td>
          <td class="text-end">{{ batch.created_at|date:"d/m/Y H:i" }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="4" class="text-center">Nenhum lote encontrado.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  {% include 'components/_pagination.html' with page_obj=batches %}

{% endblock %}
{% extends 'base.html' %}
{% load static %}

{% block title %}Lista de Itens{% endblock %}

{% block content %}
<div class="container mt-4">
  <h3 class="display-6">Itens Cadastrados</h3>

  <div class="mb-3 text-end">
    <a href="{% url 'inventory:item-create' %}" class="btn btn-success">
      <i class="fas fa-plus"></i> Novo Item
    </a>
  </div>

  <table class="table table-striped table-hover align-middle">
    <thead class="table-dark">
      <tr>
        <th>Nome</th>
        <th>Subcategoria</th>
        <th>Projeto</th>
        <th>Fornecedor</th>
        <th>M.O.Q</th>
        <th class="text-end">Preço de Custo</th>
        <th class="text-end">Preço de Venda</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      {% for item in items %}
      <tr>
        <td>{{ item.name }}</td>
        <td>{{ item.subcategory }}</td>
        <td>{{ item.project }}</td>
        <td>{{ item.supplier }}</td>
        <td>{{ item.moq }}</td>
        <td class="text-end">{{ item.cost_price|default:"-"}}</td>
        <td class="text-end">{{ item.selling_price|default:"-" }}</td>
        <td>
          <a href="{% url 'inventory:item-edit' item.pk %}" class="btn btn-warning btn-sm">
            <i class="bi bi-pencil"></i>
          </a>
          <a href="{% url 'inventory:item-delete' item.pk %}" class="btn btn-danger btn-sm">
            <i class="bi bi-trash"></i>
          </a>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="6" class="text-center">Nenhum item cadastrado.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% if is_paginated %}
  <nav aria-label="Paginação">
    <ul class="pagination justify-content-center">
      {% if page_obj.has_previous %}
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.previous_page_number }}">Anterior</a>
      </li>
      {% endif %}

      {% for num in paginator.page_range %}
      <li class="page-item {% if page_obj.number == num %}active{% endif %}">
        <a class="page-link" href="?page={{ num }}">{{ num }}</a>
      </li>
      {% endfor %}

      {% if page_obj.has_next %}
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.next_page_number }}">Próxima</a>
      </li>
      {% endif %}
    </ul>
  </nav>
  {% endif %}
</div>
{% endblock %}
